From 552428cf1e7b5c275cd17d10c775969f5deb6da0 Mon Sep 17 00:00:00 2001
From: Alexander Vorobyev <avorobyev@protonmail.com>
Date: Thu, 30 Apr 2020 21:23:02 +0300
Subject: Fix build errors with MyGUI 3.4.0

---
 apps/openmw/mwgui/alchemywindow.cpp  | 1 +
 apps/openmw/mwgui/alchemywindow.hpp  | 5 +----
 apps/openmw/mwgui/bookpage.hpp       | 1 +
 apps/openmw/mwgui/loadingscreen.hpp  | 2 ++
 apps/openmw/mwgui/mapwindow.hpp      | 1 +
 apps/openmw/mwgui/race.hpp           | 2 ++
 apps/openmw/mwgui/savegamedialog.hpp | 2 ++
 apps/openmw/mwgui/screenfader.hpp    | 1 +
 apps/openmw/mwgui/spellview.hpp      | 1 +
 apps/openmw/mwgui/videowidget.hpp    | 2 ++
 components/esm/custommarkerstate.hpp | 2 +-
 11 files changed, 15 insertions(+), 5 deletions(-)

diff --git a/apps/openmw/mwgui/alchemywindow.cpp b/apps/openmw/mwgui/alchemywindow.cpp
index fa8a96185..4fc2a57a2 100644
--- a/apps/openmw/mwgui/alchemywindow.cpp
+++ b/apps/openmw/mwgui/alchemywindow.cpp
@@ -3,6 +3,7 @@
 #include <MyGUI_Gui.h>
 #include <MyGUI_Button.h>
 #include <MyGUI_EditBox.h>
+#include <MyGUI_ControllerManager.h>
 
 #include "../mwbase/environment.hpp"
 #include "../mwbase/world.hpp"
diff --git a/apps/openmw/mwgui/alchemywindow.hpp b/apps/openmw/mwgui/alchemywindow.hpp
index aa23fbaa5..c6eb00792 100644
--- a/apps/openmw/mwgui/alchemywindow.hpp
+++ b/apps/openmw/mwgui/alchemywindow.hpp
@@ -1,12 +1,9 @@
 #ifndef MWGUI_ALCHEMY_H
 #define MWGUI_ALCHEMY_H
 
+#include <memory>
 #include <vector>
 
-#include <MyGUI_ControllerManager.h>
-
-#include "../mwmechanics/alchemy.hpp"
-
 #include <components/widgets/numericeditbox.hpp>
 
 #include "controllers.hpp"
diff --git a/apps/openmw/mwgui/bookpage.hpp b/apps/openmw/mwgui/bookpage.hpp
index 4ea59414d..7f7dfd20a 100644
--- a/apps/openmw/mwgui/bookpage.hpp
+++ b/apps/openmw/mwgui/bookpage.hpp
@@ -6,6 +6,7 @@
 #include "MyGUI_FontManager.h"
 
 #include <functional>
+#include <memory>
 #include <stdint.h>
 
 #include <components/settings/settings.hpp>
diff --git a/apps/openmw/mwgui/loadingscreen.hpp b/apps/openmw/mwgui/loadingscreen.hpp
index e74a60206..c054f3bbd 100644
--- a/apps/openmw/mwgui/loadingscreen.hpp
+++ b/apps/openmw/mwgui/loadingscreen.hpp
@@ -1,6 +1,8 @@
 #ifndef MWGUI_LOADINGSCREEN_H
 #define MWGUI_LOADINGSCREEN_H
 
+#include <memory>
+
 #include <osg/Timer>
 #include <osg/ref_ptr>
 
diff --git a/apps/openmw/mwgui/mapwindow.hpp b/apps/openmw/mwgui/mapwindow.hpp
index ed6e4874f..3d9ca23d8 100644
--- a/apps/openmw/mwgui/mapwindow.hpp
+++ b/apps/openmw/mwgui/mapwindow.hpp
@@ -2,6 +2,7 @@
 #define MWGUI_MAPWINDOW_H
 
 #include <stdint.h>
+#include <memory>
 
 #include "windowpinnablebase.hpp"
 
diff --git a/apps/openmw/mwgui/race.hpp b/apps/openmw/mwgui/race.hpp
index c9e31d42d..0fa4fdec5 100644
--- a/apps/openmw/mwgui/race.hpp
+++ b/apps/openmw/mwgui/race.hpp
@@ -1,6 +1,8 @@
 #ifndef MWGUI_RACE_H
 #define MWGUI_RACE_H
 
+#include <memory>
+
 #include "windowbase.hpp"
 #include <MyGUI_RenderManager.h>
 
diff --git a/apps/openmw/mwgui/savegamedialog.hpp b/apps/openmw/mwgui/savegamedialog.hpp
index 0a87b6600..a9915ee9d 100644
--- a/apps/openmw/mwgui/savegamedialog.hpp
+++ b/apps/openmw/mwgui/savegamedialog.hpp
@@ -1,6 +1,8 @@
 #ifndef OPENMW_MWGUI_SAVEGAMEDIALOG_H
 #define OPENMW_MWGUI_SAVEGAMEDIALOG_H
 
+#include <memory>
+
 #include "windowbase.hpp"
 
 namespace MWState
diff --git a/apps/openmw/mwgui/screenfader.hpp b/apps/openmw/mwgui/screenfader.hpp
index 79bea30e5..aa17ed4e8 100644
--- a/apps/openmw/mwgui/screenfader.hpp
+++ b/apps/openmw/mwgui/screenfader.hpp
@@ -2,6 +2,7 @@
 #define OPENMW_MWGUI_SCREENFADER_H
 
 #include <deque>
+#include <memory>
 
 #include "windowbase.hpp"
 
diff --git a/apps/openmw/mwgui/spellview.hpp b/apps/openmw/mwgui/spellview.hpp
index 0eb69f6ba..66113d869 100644
--- a/apps/openmw/mwgui/spellview.hpp
+++ b/apps/openmw/mwgui/spellview.hpp
@@ -1,6 +1,7 @@
 #ifndef OPENMW_GUI_SPELLVIEW_H
 #define OPENMW_GUI_SPELLVIEW_H
 
+#include <memory>
 #include <tuple>
 
 #include <MyGUI_Widget.h>
diff --git a/apps/openmw/mwgui/videowidget.hpp b/apps/openmw/mwgui/videowidget.hpp
index 20af579a2..dadd1471a 100644
--- a/apps/openmw/mwgui/videowidget.hpp
+++ b/apps/openmw/mwgui/videowidget.hpp
@@ -1,6 +1,8 @@
 #ifndef OPENMW_MWGUI_VIDEOWIDGET_H
 #define OPENMW_MWGUI_VIDEOWIDGET_H
 
+#include <memory>
+
 #include <MyGUI_Widget.h>
 
 namespace Video
diff --git a/components/esm/custommarkerstate.hpp b/components/esm/custommarkerstate.hpp
index fc9286bfe..2be43c53b 100644
--- a/components/esm/custommarkerstate.hpp
+++ b/components/esm/custommarkerstate.hpp
@@ -16,7 +16,7 @@ struct CustomMarker
 
     std::string mNote;
 
-    bool operator == (const CustomMarker& other)
+    bool operator == (const CustomMarker& other) const
     {
         return mNote == other.mNote && mCell == other.mCell && mWorldX == other.mWorldX && mWorldY == other.mWorldY;
     }
-- 
2.26.2

